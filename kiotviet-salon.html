<!DOCTYPE html><html lang="vi" class="scroll-smooth"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Game KiotViet Salon</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; touch-action: manipulation; }
        .soft-glow-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -10; background: linear-gradient(to bottom right, #f8fafc, #e0f2fe); overflow: hidden; }
        .soft-glow-background .shape { position: absolute; filter: blur(140px); opacity: 0.25; }
        .soft-glow-background .shape1 { height: 350px; width: 350px; background: #166def; border-radius: 50%; top: -50px; left: -100px; animation: moveInCircle 22s ease-in-out infinite; }
        @keyframes moveInCircle { 0% { transform: rotate(0deg); } 50% { transform: rotate(180deg); } 100% { transform: rotate(360deg); } }
        .soft-glow-background .shape2 { height: 450px; width: 450px; background: #16a34a; border-radius: 50%; bottom: -100px; right: -100px; animation: moveVertical 28s ease-in-out infinite; }
        @keyframes moveVertical { 0% { transform: translateY(-50%); } 50% { transform: translateY(50%); } 100% { transform: translateY(-50%); } }
        .kv-blue { color: #166def; } .bg-kv-blue { background-color: #166def; }
        .main-card { background-color: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(203, 213, 225, 0.5); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .fade-in { animation: fadeIn 0.5s ease-in-out; } @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .mode-btn { transition: all 0.2s ease; } .mode-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }
        .btn-selected-green { background-color: #16a34a !important; border-color: #15803d !important; color: white !important; }
        .correct { background-color: #10B981 !important; color: white !important; border-color: #059669 !important; }
        .incorrect { background-color: #EF4444 !important; color: white !important; border-color: #DC2626 !important; }
        #certificate-wrapper { width: 100%; max-width: 1100px; aspect-ratio: 16 / 9; display: flex; flex-direction: column; }
        #certificate-content { flex-grow: 1; border: 10px solid #166def; padding: clamp(1rem, 4vw, 2rem); background: linear-gradient(135deg, #ffffff 0%, #f7faff 100%); display: flex; flex-direction: column; justify-content: center; }
        .review-answer.is-correct-answer { border-left: 4px solid #10B981; background-color: #f0fdf4; }
        .review-answer.is-selected-incorrect { border-left: 4px solid #EF4444; background-color: #fef2f2; }
        .btn { font-weight: bold; padding: 0.75rem 2rem; border-radius: 0.5rem; text-align: center; transition: all 0.2s; cursor: pointer; }
        .btn-blue { background-color: #166def; color: white; } .btn-blue:hover { background-color: #0a58ca; }
        .btn-green { background-color: #16a34a; color: white; } .btn-green:hover { background-color: #15803d; }
        .btn-slate { background-color: #475569; color: white; } .btn-slate:hover { background-color: #334155; }
    </style></head><body class="text-slate-700 antialiased flex items-center justify-center min-h-screen p-4">
    <div class="soft-glow-background"><div class="shape shape1"></div><div class="shape shape2"></div></div>
    <main class="w-full max-w-2xl">
        <div id="start-screen" class="main-card rounded-2xl p-6 sm:p-8 lg:p-10 fade-in"></div>
        <div id="quiz-container" class="main-card rounded-2xl p-6 sm:p-8 lg:p-10 hidden fade-in"></div>
        <div id="result-area" class="main-card rounded-2xl p-6 sm:p-8 lg:p-10 hidden text-center fade-in"></div>
        <div id="review-screen" class="main-card rounded-2xl p-6 sm:p-8 lg:p-10 hidden fade-in w-full max-w-3xl"></div>
    </main>
    <div id="certificate-screen" class="hidden fixed inset-0 bg-slate-900/70 backdrop-blur-sm z-50 flex items-center justify-center p-4 fade-in"></div><script>
    // --- Data Injection Placeholders (SIMPLIFIED) ---
    const quizDataForClient = [{"id":"q1","topic":"Tối ưu vận hành","question":"Đối với một khách hàng đã mua gói chăm sóc da 10 buổi tại spa, làm thế nào để thiết lập lịch hẹn định kỳ cho các buổi cách nhau 2 ngày?","answers":[{"id":"q1_a1","text":"Có thể, cần sử dụng chức năng Tạo lịch định kỳ trong phần chi tiết Thông tin khách hàng tại Màn hình lễ tân"},{"id":"q1_a2","text":"Có thể, sử dụng chức năng Tạo lịch định kỳ trong Báo cáo cuối ngày"},{"id":"q1_a3","text":"Chưa hỗ trợ Tạo lịch định kỳ, chỉ có thể tạo lịch hẹn thủ công gắn với liệu trình"}]},{"id":"q2","topic":"Tối ưu vận hành","question":"Khi một khách hàng đã đến spa nhưng chưa bắt đầu sử dụng dịch vụ, trạng thái nào trên lịch hẹn sẽ phản ánh điều này?","answers":[{"id":"q2_a1","text":"Đang chờ"},{"id":"q2_a2","text":"Sắp đến"},{"id":"q2_a3","text":"Chờ xác nhận"}]},{"id":"q3","topic":"Tối ưu vận hành","question":"Để giúp nhân viên lễ tân và kỹ thuật viên chủ động trong việc chăm sóc khách hàng, những loại thông báo nào trên ứng dụng KiotViet Salon cần được kích hoạt?","answers":[{"id":"q3_a1","text":"Lịch đặt online, Lịch hẹn trước, Sinh nhật khách hàng, Thẻ dịch vụ sắp hết hạn"},{"id":"q3_a2","text":"Dịch vụ tôi sắp phải làm, Dịch vụ mới tôi được phân công"},{"id":"q3_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q4","topic":"Tối ưu vận hành","question":"Để lùi lịch hẹn của khách hàng đi 1 tiếng so với thời gian đã đặt trước đó, có những phương pháp nào có thể áp dụng?","answers":[{"id":"q4_a1","text":"Bấm Chỉnh sửa lịch hẹn để sửa thông tin thời gian"},{"id":"q4_a2","text":"Kéo thả lịch hẹn trên Màn hình lễ khi xem lịch theo Ngày để thay đổi thời gian"},{"id":"q4_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q5","topic":"Tối ưu vận hành","question":"Để trừ số buổi đã sử dụng trong gói liệu trình, nhân viên lễ tân có thể thực hiện bằng cách nào?","answers":[{"id":"q5_a1","text":"Sau khi đưa Gói liệu trình vào Hóa đơn bán hàng, có thể bấm Trừ buổi"},{"id":"q5_a2","text":"Nếu đã bán Gói liệu trình trước đó, khi thêm mới lịch hẹn chọn Khách hàng có gói liệu trình, bấm Trừ gói dịch vụ, liệu trình"},{"id":"q5_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q6","topic":"Tối ưu vận hành","question":"Khi khách hàng đã mua gói liệu trình, làm thế nào để lễ tân có thể trừ ngay một buổi dịch vụ trong gói?","answers":[{"id":"q6_a1","text":"Có thể sử dụng tính năng Trừ buổi ngay sau khi đưa Gói liệu trình vào Hóa đơn"},{"id":"q6_a2","text":"Bắt buộc phải thanh toán hóa đơn rồi tạo lịch hẹn mới thì mới có thể Trừ buổi"},{"id":"q6_a3","text":"Thêm mới dịch vụ lẻ trước, sau đó bấm nút Tạo gói liệu trình cho dịch vụ này"}]},{"id":"q7","topic":"Tối ưu vận hành","question":"Khi bán liệu trình, lễ tân có thể thêm một dịch vụ tặng kèm vào gói liệu trình đã có sẵn trên hệ thống bằng cách nào?","answers":[{"id":"q7_a1","text":"Không thể, cần tạo dịch vụ tặng kèm ngoài gói giá 0 đồng"},{"id":"q7_a2","text":"Có thể, sử dụng Tùy chọn Tùy chỉnh Gói Dịch vụ, liệu trình"},{"id":"q7_a3","text":"Có thể, tạo chương trình khuyến mại mua Hàng tặng hàng"}]},{"id":"q8","topic":"Tối ưu vận hành","question":"Khi bán thẻ tài khoản, lễ tân có thể thay đổi mệnh giá cao hơn so với mệnh giá gốc trên hệ thống bằng cách nào?","answers":[{"id":"q8_a1","text":"Không thể, cần tạo dịch vụ tặng kèm ngoài gói giá 0 đồng"},{"id":"q8_a2","text":"Có thể điều chỉnh mệnh giá trên từng hóa đơn"},{"id":"q8_a3","text":"Có thể, tạo chương trình khuyến mại mua Hàng tặng hàng"}]},{"id":"q9","topic":"Tối ưu vận hành","question":"Làm thế nào để thay đổi kỹ thuật viên chịu trách nhiệm trên một lịch hẹn đã tạo?","answers":[{"id":"q9_a1","text":"Xem lịch hẹn theo Ngày, kéo thả lịch hẹn từ Nhân viên này sang Nhân viên kia"},{"id":"q9_a2","text":"Lựa chọn lịch hẹn và Chính sửa lịch hẹn"},{"id":"q9_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q10","topic":"Tối ưu vận hành","question":"\"Khi 3 nhân viên cùng thực hiện một dịch vụ, có cách nào để chia doanh thu theo tỷ lệ 40:30:30 trên phần mềm không? \"","answers":[{"id":"q10_a1","text":"\"Có, nhập hệ số 40:30:30 khi chọn nhân viên thực hiện trên màn hình thu ngân\""},{"id":"q10_a2","text":"\"Không, phần mềm chỉ hỗ trợ chia doanh thu cho tối đa 2 nhân viên \""},{"id":"q10_a3","text":"Tính năng chưa có trên KiotViet Salon"}]},{"id":"q11","topic":"Tối ưu vận hành","question":"Khi bán thẻ tài khoản với giá 8.000.000 nhưng khách hàng được sử dụng 10.000.000 trong tài khoản Spa, cách thiết lập thông tin trên hệ thống là gì?","answers":[{"id":"q11_a1","text":"Giá bán và Mệnh giá đều là 8.000.000"},{"id":"q11_a2","text":"Giá bán là 8.000.000, Mệnh giá là 10.000.000"},{"id":"q11_a3","text":"Giá bán là 10.000.000, Mệnh giá là 8.000.000"}]},{"id":"q12","topic":"Tối ưu vận hành","question":"Khi có nhiều hơn 2 nhân viên cùng tham gia tư vấn bán một gói liệu trình, phần mềm có hỗ trợ chọn tất cả các nhân viên tư vấn không?","answers":[{"id":"q12_a1","text":"Có, phần mềm cho chọn nhiều nhân viên tư vấn"},{"id":"q12_a2","text":"Phần mềm chỉ chọn được tối đa 2 nhân viên tư vấn"},{"id":"q12_a3","text":"Phần mềm chỉ chọn được 1 nhân viên tư vấn"}]},{"id":"q13","topic":"Tối ưu vận hành","question":"Khi khách hàng muốn sử dụng thẻ tài khoản để thanh toán, lễ tân cần thực hiện thao tác nào?","answers":[{"id":"q13_a1","text":"Thanh toán đa phương thức"},{"id":"q13_a2","text":"Bấm nút trừ thẻ để xem thông tin chi tiết các thẻ tài khoản và chọn số tiền thanh toán"},{"id":"q13_a3","text":"Giảm giá"}]},{"id":"q14","topic":"Tối ưu vận hành","question":"Làm thế nào để thêm thuế VAT 8% vào hóa đơn trên KiotViet Salon?","answers":[{"id":"q14_a1","text":"Sử dụng tính năng Thu khác"},{"id":"q14_a2","text":"Sử dụng tính năng Quản lý Thuế"},{"id":"q14_a3","text":"Sử dụng tính năng Thuế VAT"}]},{"id":"q15","topic":"Tối ưu vận hành","question":"Làm thế nào để tạo mã QR giúp khách hàng đánh giá dịch vụ trên hóa đơn KiotViet Salon?","answers":[{"id":"q15_a1","text":"Chưa hỗ trợ tính năng này"},{"id":"q15_a2","text":"Bật tính năng Liên kết Google Form trong Thiết lập cửa hàng"},{"id":"q15_a3","text":"Bật tính năng Đánh giá dịch vụ trong Thiết lập cửa hàng"}]},{"id":"q16","topic":"Tối ưu quản lý","question":"Khi lễ tân chọn một khách hàng và xem chi tiết thông tin, mục Tổng quan sẽ hiển thị những nội dung gì?","answers":[{"id":"q16_a1","text":"Ngày khách bắt đầu mua hàng hóa, dịch vụ"},{"id":"q16_a2","text":"Hình ảnh khách sử dụng dịch vụ gần nhất"},{"id":"q16_a3","text":"Chức năng Bảo lưu thẻ"}]},{"id":"q17","topic":"Tối ưu quản lý","question":"Những đặc điểm nào được hỗ trợ cho hàng hóa dịch vụ trên KiotViet Salon?","answers":[{"id":"q17_a1","text":"Hỗ trợ điền nguyên liệu tiêu hao"},{"id":"q17_a2","text":"Quản lý thời lượng"},{"id":"q17_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q18","topic":"Tối ưu quản lý","question":"Để quản lý dịch vụ Đắp mặt nạ dưỡng da 60 phút (tiêu hao 1 Mặt nạ dưỡng da cao cấp), cách thực hiện trên KiotViet là gì?","answers":[{"id":"q18_a1","text":"Tạo hàng hóa Dịch vụ: Đắp mặt nạ dưỡng da, điền Mặt nạ dưỡng da vào tab Nguyên liệu tiêu hao"},{"id":"q18_a2","text":"Tạo hàng hóa Dịch vụ: Đắp mặt nạ dưỡng da, điền Mặt nạ dưỡng da vào tab Thành phần"},{"id":"q18_a3","text":"Tạo hàng hóa Gói Dịch vụ: Đắp mặt nạ dưỡng da, điền Mặt nạ dưỡng da vào tab Thành phần"}]},{"id":"q19","topic":"Tối ưu quản lý","question":"Làm thế nào để tính giá vốn cho một gói dịch vụ (liệu trình) trên KiotViet Salon?","answers":[{"id":"q19_a1","text":"Do người dùng tự điền trong mục Giá vốn"},{"id":"q19_a2","text":"Bằng tổng Giá vốn các dịch vụ thành phần"},{"id":"q19_a3","text":"Bằng tổng Giá bán các dịch vụ thành phần"}]},{"id":"q20","topic":"Tối ưu quản lý","question":"Khi khách hàng muốn gộp 2 thẻ tài khoản đã mua thành một loại thẻ duy nhất, cách thực hiện trên KiotViet Salon là gì?","answers":[{"id":"q20_a1","text":"Vào Màn hình Thu ngân, tìm Khách hàng đó và chọn \"Thẻ và Gói DV\" > chọn chức năng Gộp thẻ"},{"id":"q20_a2","text":"Vào Danh mục Hàng hóa, chọn \" Thẻ và Gói DV\" > chọn chức năng Gộp thẻ"},{"id":"q20_a3","text":"KV Salon chưa hỗ trợ tính năng này"}]},{"id":"q21","topic":"Tối ưu quản lý","question":"Khi cần thay đổi hạn sử dụng (HSD) của một Gói dịch vụ đã bán, thu ngân có thể thực hiện bằng cách nào?","answers":[{"id":"q21_a1","text":"Không thể thay đổi"},{"id":"q21_a2","text":"Tìm kiếm khách hàng và lựa chọn Xem chi tiết Gói dịch vụ > Có thể điều chỉnh HSD"},{"id":"q21_a3","text":"Vào Danh mục hàng hóa để thay đổi HSD của Gói dịch vụ"}]},{"id":"q22","topic":"Tối ưu quản lý","question":"Định nghĩa \"Mệnh giá\" của thẻ tài khoản là gì?","answers":[{"id":"q22_a1","text":"Số tiền khách hàng có trong thẻ tài khoản sau khi mua thẻ"},{"id":"q22_a2","text":"Số tiền khách hàng bỏ ra để mua thẻ"},{"id":"q22_a3","text":"Giá vốn của Thẻ tài khoản"}]},{"id":"q23","topic":"Tối ưu quản lý","question":"Làm thế nào để lễ tân thực hiện trả hàng theo hóa đơn gốc trên KiotViet Salon?","answers":[{"id":"q23_a1","text":"Có hỗ trợ, lễ tân lựa chọn Trả hàng, tìm hóa đơn gốc, bấm Chọn và thực hiện trả hàng theo hóa đơn"},{"id":"q23_a2","text":"Có hỗ trợ, lễ tân vào Màn hình quản lý > Giao dịch hóa đơn > Tìm hóa đơn gốc, bấm Trả hàng"},{"id":"q23_a3","text":"Chưa hỗ trợ trả hàng sản phẩm theo hóa đơn"}]},{"id":"q24","topic":"Tối ưu quản lý","question":"Làm thế nào để chủ cửa hàng ẩn số điện thoại của khách hàng khỏi nhân viên trên KiotViet Salon?","answers":[{"id":"q24_a1","text":"Có thể, khi thể tắt phân quyền người dùng ở mục Điện thoại, nhân viên sẽ không thấy trường thông tin số điện thoại của khách"},{"id":"q24_a2","text":"Có thể, khi tắt phân quyền người dùng ở mục Điện thoại, nhân viên sẽ chỉ có thể thấy 4 số cuối trong số điện thoại của khách"},{"id":"q24_a3","text":"Chưa hỗ trợ tính năng này"}]},{"id":"q25","topic":"Tối ưu quản lý","question":"Khi nhà cung cấp xóa nợ cho cửa hàng, lễ tân cần sử dụng chức năng nào trên phần mềm để ghi nhận?","answers":[{"id":"q25_a1","text":"Điều chỉnh"},{"id":"q25_a2","text":"Thanh toán"},{"id":"q25_a3","text":"Xóa nợ"}]},{"id":"q26","topic":"Tối ưu quản lý","question":"Sự khác biệt giữa hoa hồng và thưởng trong thiết lập lương là gì?","answers":[{"id":"q26_a1","text":"Hoa hồng là khoản tiền mà một hoặc nhiều nhân viên bán hàng nhận được khi bán hoặc thực hiện thành công một sản phẩm, dịch vụ nào đó"},{"id":"q26_a2","text":"Tiền thưởng là khoản tiền dành cho nhân viên khi đạt mục tiêu được giao"},{"id":"q26_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q27","topic":"Tối ưu quản lý","question":"Làm thế nào để tính hoa hồng cho nhân viên tư vấn bán hàng theo tỷ lệ tại salon?","answers":[{"id":"q27_a1","text":"Có thể ghi nhận giá trị trả hoa hồng theo VNĐ cho từng nhân viên hoặc giá trị % tính cho từng nhân viên"},{"id":"q27_a2","text":"Có thể ghi nhận theo tỉ lệ doanh thu, ví dụ 3:1, một nhân viên tính hoa hồng dựa trên 3/4 doanh thu, nhân viên còn lại tính hoa hồng dựa trên 1/4 doanh thu"},{"id":"q27_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q28","topic":"Tối ưu quản lý","question":"Làm thế nào để chủ cửa hàng chấm công thủ công cho nhân viên khi máy chấm công bị hỏng?","answers":[{"id":"q28_a1","text":"KiotViet không hỗ trợ chấm công thủ công"},{"id":"q28_a2","text":"KiotViet có hỗ trợ chấm công thủ công nhưng phải thao tác trên máy tính"},{"id":"q28_a3","text":"KiotViet có hỗ trợ chấm công thủ công thao tác trên điện thoại"}]},{"id":"q29","topic":"Tối ưu quản lý","question":"Làm thế nào để nhân viên kiểm tra chi tiết hoa hồng của mình qua ứng dụng điện thoại?","answers":[{"id":"q29_a1","text":"Chưa hỗ trợ tính năng này"},{"id":"q29_a2","text":"Có hỗ trợ xem chi tiết hoa hồng, nhưng chưa hỗ trợ trên điện thoại, nhân viên phải đăng nhập xem trên máy tính"},{"id":"q29_a3","text":"Có hỗ trợ xem chi tiết hoa hồng trên điện thoại"}]},{"id":"q30","topic":"Tối ưu quản lý","question":"Những yếu tố nào tác động đến số dư trong Tồn quỹ của Sổ quỹ?","answers":[{"id":"q30_a1","text":"Quỹ đầu kì"},{"id":"q30_a2","text":"Tổng thu và Tổng chi"},{"id":"q30_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q31","topic":"Tối ưu quản lý","question":"Khi khách hàng thanh toán công nợ 500.000 bằng tiền mặt, lễ tân có thể lập phiếu thu ở đâu?","answers":[{"id":"q31_a1","text":"Màn hình quản lý"},{"id":"q31_a2","text":"Màn hình thu ngân"},{"id":"q31_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q32","topic":"Tối ưu quản lý","question":"Trên Màn hình quản lý của KiotViet Salon, người dùng có thể xem những loại báo cáo nào?","answers":[{"id":"q32_a1","text":"Báo cáo Thẻ dịch vụ"},{"id":"q32_a2","text":"Báo cáo Đánh giá dịch vụ"},{"id":"q32_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q33","topic":"Tối ưu quản lý","question":"Người dùng có thể xem Báo cáo đánh giá dịch vụ ở những đâu trên hệ thống KiotViet Salon?","answers":[{"id":"q33_a1","text":"App KiotViet Salon"},{"id":"q33_a2","text":"Báo cáo trong Màn hình Quản lý trên Web"},{"id":"q33_a3","text":"Cả trên Màn hình Quản lý trên Web và app KiotViet Salon"}]},{"id":"q34","topic":"Tối ưu quản lý","question":"Lý do cần cấp tài khoản cá nhân cho từng kỹ thuật viên spa là gì?","answers":[{"id":"q34_a1","text":"Hỗ trợ nhắc lịch hẹn sắp tới giờ, Xem được thành quả công việc của mình"},{"id":"q34_a2","text":"Kiểm tra chi tiết được hoa hồng mình được ghi nhận"},{"id":"q34_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q35","topic":"Tối ưu quản lý","question":"Khi nhân viên quên mật khẩu, họ có thể khôi phục mật khẩu bằng cách nào?","answers":[{"id":"q35_a1","text":"Có thể lấy lại mật khẩu qua email nếu đã đăng ký thông tin"},{"id":"q35_a2","text":"Có thể liên hệ chủ gian hàng để nhận mã xác thực và đổi mật khẩu"},{"id":"q35_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q36","topic":"Tối ưu quản lý","question":"Làm thế nào để thêm nhanh tất cả các vị trí Ghế/Giường trong salon một cách hiệu quả?","answers":[{"id":"q36_a1","text":"Thêm mới từng vị trí trên danh sách Phòng trên Màn hình quản lý"},{"id":"q36_a2","text":"Thêm mới từng vị trí trên danh sách Phòng trên mobile app KiotViet Salon"},{"id":"q36_a3","text":"Import danh sách Vị trí trên Màn hình quản lý"}]},{"id":"q37","topic":"Tối ưu quản lý","question":"Phần mềm KiotViet Salon hỗ trợ cài đặt trên những loại thiết bị nào?","answers":[{"id":"q37_a1","text":"Máy tính, Máy POS Android"},{"id":"q37_a2","text":"Máy tính, Điện thoại"},{"id":"q37_a3","text":"Máy tính, Điện thoại, Máy POS Android"}]},{"id":"q38","topic":"Thúc đẩy doanh thu","question":"Trang Đặt lịch online của KiotViet Salon cho phép cửa hàng tùy chỉnh những thông tin nào?","answers":[{"id":"q38_a1","text":"Giao diện hiển thị, Nhân viên, Chi nhánh, Nhân viên làm dịch vụ"},{"id":"q38_a2","text":"Tùy chọn hiển thị giá dịch vụ, hiển thị dịch vụ"},{"id":"q38_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q39","topic":"Thúc đẩy doanh thu","question":"Khi khách hàng muốn đặt lịch online để nhân viên đến phục vụ tại nhà, họ cần thực hiện như thế nào?","answers":[{"id":"q39_a1","text":"Có thể, khách hàng điền yêu cầu vào phần ghi chú"},{"id":"q39_a2","text":"Có thể, khách hàng điền yêu cầu vào phần Nhập địa chỉ sử dụng dịch vụ tại nhà"},{"id":"q39_a3","text":"Chưa hỗ trợ"}]},{"id":"q40","topic":"Thúc đẩy doanh thu","question":"Làm thế nào để lễ tân nhận biết có lịch đặt online mới trên màn hình lễ tân?","answers":[{"id":"q40_a1","text":"Không có dấu hiệu nhận biết"},{"id":"q40_a2","text":"Nút Lịch online xuất hiện chấm đỏ"},{"id":"q40_a3","text":"Có popup xuất hiện tự động trên màn hình lễ tân khi có lịch online mới"}]},{"id":"q41","topic":"Thúc đẩy doanh thu","question":"KiotViet Salon có cho phép tùy chỉnh banner trên website giới thiệu salon không?","answers":[{"id":"q41_a1","text":"KiotViet Salon chưa hỗ trợ tạo website"},{"id":"q41_a2","text":"KiotViet Salon đã hỗ trợ tạo website nhưng chưa hỗ trợ đổi banner"},{"id":"q41_a3","text":"KiotViet Salon đã hỗ trợ tạo website, hỗ trợ đổi banner"}]},{"id":"q42","topic":"Thúc đẩy doanh thu","question":"Chi phí để sử dụng đuôi tên miền spathugian.net trên KiotViet Web là bao nhiêu?","answers":[{"id":"q42_a1","text":"Miễn phí"},{"id":"q42_a2","text":"200.000/tháng"},{"id":"q42_a3","text":"200.000/năm"}]},{"id":"q43","topic":"Thúc đẩy doanh thu","question":"Các bước cần thực hiện để gửi tin nhắn xác nhận thanh toán ZNS qua KiotViet là gì?","answers":[{"id":"q43_a1","text":"Chỉ cần gọi điện cho DVKH KiotViet để bật tính năng, gửi tin nhắn miễn phí không cần nạp tiền"},{"id":"q43_a2","text":"Liên kết tài khoản Zalo OA sẵn có với KiotViet, lựa chọn mẫu tin, nạp tiền vào KiotViet"},{"id":"q43_a3","text":"Liên kết tài khoản Zalo OA sẵn có với KiotViet, lựa chọn mẫu tin, nạp tiền vào Zalo OA"}]},{"id":"q44","topic":"Thúc đẩy doanh thu","question":"App hội viên HiKiot cung cấp những lợi ích gì cho khách hàng của salon?","answers":[{"id":"q44_a1","text":"Xem thông tin liên hệ của cửa hàng, xem điểm tích lũy, đặt trước lịch làm dịch vụ, xem lịch làm dịch vụ"},{"id":"q44_a2","text":"Xem thông tin trạng thái các gói dịch vụ, thẻ tài khoản đã mua, đặt lịch trong liệu trình"},{"id":"q44_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q45","topic":"Thúc đẩy doanh thu","question":"Tính năng Phân tích thông minh trên KiotViet Salon mang lại những lợi ích gì?","answers":[{"id":"q45_a1","text":"Giúp nhận diện khách hàng có nguy cơ rời bỏ, giúp triển khai chiến lực giảm tỷ lệ rời bỏ của khách hàng"},{"id":"q45_a2","text":"Giúp đánh giá chính xác hiệu quả làm việc của từng nhân viên, từ đó có thể đưa ra các biện pháp hỗ trợ và phát triển."},{"id":"q45_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q46","topic":"Thúc đẩy doanh thu","question":"Làm thế nào để tạo chương trình khuyến mãi giảm 5% khi tổng tiền hàng vượt quá 5.000.000?","answers":[{"id":"q46_a1","text":"Bật tính năng Khuyến mại trong Thiết lập cửa hàng, sau đó có thể tạo mới Khuyến mại"},{"id":"q46_a2","text":"Sử dụng tính năng Nhóm khách hàng"},{"id":"q46_a3","text":"Sử dụng tính năng giảm giá"}]},{"id":"q47","topic":"Thúc đẩy doanh thu","question":"Chương trình khuyến mãi giảm 15% cho sản phẩm Sữa rửa mặt X khi mua 3 sản phẩm trở lên có thể áp dụng ở đâu?","answers":[{"id":"q47_a1","text":"Trên Màn hình thu ngân trên Web"},{"id":"q47_a2","text":"Trên app KiotViet Salon"},{"id":"q47_a3","text":"Cả 2 phương án còn lại đều đúng"}]},{"id":"q48","topic":"Thúc đẩy doanh thu","question":"Mệnh giá của vouchers trên KiotViet Salon có thể được thiết lập theo đơn vị nào?","answers":[{"id":"q48_a1","text":"Luôn là VNĐ"},{"id":"q48_a2","text":"Luôn là %"},{"id":"q48_a3","text":"Có thể là VNĐ hoặc %"}]},{"id":"q49","topic":"Thúc đẩy doanh thu","question":"Làm thế nào để sử dụng điểm tích lũy để thanh toán?","answers":[{"id":"q49_a1","text":"Thanh toán đa phương thức"},{"id":"q49_a2","text":"Giảm giá"},{"id":"q49_a3","text":"Thu khác"}]},{"id":"q50","topic":"Thúc đẩy doanh thu","question":"Kết nối Fanpage với KiotViet mang lại lợi ích gì cho cửa hàng?","answers":[{"id":"q50_a1","text":"Đồng bộ tin nhắn, bình luận và quản lý tập trung"},{"id":"q50_a2","text":"In bình luận khi livestream"},{"id":"q50_a3","text":"Cả 2 phương án còn lại đều đúng"}]}];
    const answerKey = {"q1":"q1_a1","q2":"q2_a1","q3":"q3_a3","q4":"q4_a3","q5":"q5_a3","q6":"q6_a1","q7":"q7_a2","q8":"q8_a2","q9":"q9_a3","q10":"q10_a1","q11":"q11_a2","q12":"q12_a1","q13":"q13_a2","q14":"q14_a1","q15":"q15_a3","q16":"q16_a1","q17":"q17_a3","q18":"q18_a1","q19":"q19_a2","q20":"q20_a1","q21":"q21_a2","q22":"q22_a1","q23":"q23_a3","q24":"q24_a2","q25":"q25_a1","q26":"q26_a3","q27":"q27_a3","q28":"q28_a3","q29":"q29_a3","q30":"q30_a3","q31":"q31_a3","q32":"q32_a3","q33":"q33_a3","q34":"q34_a3","q35":"q35_a3","q36":"q36_a3","q37":"q37_a3","q38":"q38_a3","q39":"q39_a2","q40":"q40_a2","q41":"q41_a3","q42":"q42_a1","q43":"q43_a2","q44":"q44_a3","q45":"q45_a3","q46":"q46_a1","q47":"q47_a3","q48":"q48_a3","q49":"q49_a1","q50":"q50_a1"}; // Direct object, no encoding
    const feedbackMessages = { incorrect: `Rất tiếc, bạn đã sai. Bạn hãy tham khảo thêm tài liệu tại <a href='https://sites.google.com/view/thuvienkiotviet' target='_blank' class='underline text-blue-600 hover:text-blue-800'>Thư viện KiotViet</a> nhé!`, fail: `Cần cố gắng hơn! Bạn hãy tham khảo thêm tài liệu tại <a href='https://sites.google.com/view/thuvienkiotviet' target='_blank' class='underline text-blue-600 hover:text-blue-800'>Thư viện KiotViet</a> nhé!` };
    
    // --- State & Global Variables ---
    let currentQuestionIndex, score, questionsForGame, gameResults, selectedMode, userInfo;
    
    const elements = {};

    function setupHTML() {
        elements.startScreen = document.getElementById('start-screen');
        elements.quizContainer = document.getElementById('quiz-container');
        elements.resultArea = document.getElementById('result-area');
        elements.reviewScreen = document.getElementById('review-screen');
        elements.certificateScreen = document.getElementById('certificate-screen');

        elements.startScreen.innerHTML = `
             <img src="https://logo.kiotviet.vn/KiotViet-Logo-Horizontal.svg" alt="KiotViet Logo" class="h-10 mx-auto mb-6">
             <h1 class="text-2xl sm:text-3xl font-bold text-slate-800 text-center mb-2">${document.title}</h1>
             <p class="text-slate-600 text-center mb-6">Vui lòng nhập thông tin và chọn chế độ chơi</p>
             <div class="space-y-4 mb-6">
                <div><label for="name-input" class="block text-sm font-medium text-slate-700 mb-1">Họ và tên</label><input type="text" id="name-input" class="w-full p-3 bg-white/80 border border-slate-300 rounded-lg focus:ring-2 focus:ring-kv-blue" placeholder="Nguyễn Văn A"></div>
                <div><label for="department-input" class="block text-sm font-medium text-slate-700 mb-1">Phòng ban</label><input type="text" id="department-input" class="w-full p-3 bg-white/80 border border-slate-300 rounded-lg" placeholder="TSHNI99"></div>
             </div>
             <div id="mode-selection-area" class="space-y-6"></div>
             <p id="error-message" class="text-red-500 text-center mt-4 h-5"></p>
             <button id="start-btn" class="w-full mt-4 btn btn-blue text-lg">Bắt đầu</button>`;
        
        elements.quizContainer.innerHTML = `
            <div class="flex justify-between items-center mb-4">
                <div class="text-sm font-semibold text-slate-600"><span id="question-count"></span></div>
                <div id="score-display" class="text-lg font-bold text-kv-blue">Điểm: 0</div>
            </div>
            <div class="w-full bg-slate-200 rounded-full h-2.5 mb-6">
                <div id="progress-bar" class="bg-kv-blue h-2.5 rounded-full transition-all duration-500" style="width: 0%"></div>
            </div>
            <p id="question-text" class="text-xl font-semibold text-slate-800 mb-6 min-h-[84px]"></p>
            <div id="answers-container" class="space-y-3"></div>
            <div id="feedback-area" class="mt-6 text-center"></div>
            <button id="next-btn" class="hidden w-full mt-6 btn btn-green text-lg">Câu tiếp theo</button>`;

        elements.resultArea.innerHTML = `
            <h2 id="result-title" class="text-3xl font-bold text-slate-800 mb-4">Hoàn thành!</h2>
            <p id="score-text" class="text-xl text-slate-600 mb-6"></p>
            <div id="fail-message" class="hidden text-lg text-red-600 font-semibold mb-6">${feedbackMessages.fail}</div>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                 <button id="review-btn" class="btn btn-slate">Xem lại đáp án</button>
                 <button id="certificate-btn" class="hidden btn btn-green">Xem giấy khen</button>
                 <button id="restart-btn" class="btn btn-blue">Chơi lại</button>
            </div>`;
        
        elements.reviewScreen.innerHTML = `
            <h2 class="text-2xl font-bold text-slate-800 text-center mb-6">Xem Lại Kết Quả</h2>
            <div id="review-container" class="space-y-6 max-h-[60vh] overflow-y-auto pr-2"></div>
            <div class="mt-8 flex flex-col sm:flex-row justify-center gap-4">
                <button id="certificate-btn-from-review" class="hidden btn btn-green">Xem giấy khen</button>
                <button id="restart-from-review-btn" class="btn btn-blue">Chơi lại</button>
            </div>`;

        elements.certificateScreen.innerHTML = `
            <div id="certificate-wrapper">
                <div id="certificate-content">
                    <div class="text-center">
                        <img src="https://logo.kiotviet.vn/KiotViet-Logo-Horizontal.svg" alt="KiotViet Logo" class="h-8 sm:h-10 mx-auto mb-4">
                        <h1 class="text-2xl sm:text-4xl font-bold text-kv-blue" style="font-family: 'Times New Roman', serif;">GIẤY CHỨNG NHẬN</h1>
                        <p class="text-base sm:text-lg mt-4">Trân trọng trao cho</p>
                        <p id="cert-name" class="text-xl sm:text-3xl font-bold text-slate-800 my-4 border-b-2 border-slate-300 pb-2"></p>
                        <p id="cert-department" class="text-base sm:text-lg font-medium text-slate-600 -mt-2 mb-4"></p>
                        <p class="text-base sm:text-lg">Đã xuất sắc hoàn thành bài kiểm tra</p>
                        <p id="cert-quiz-name" class="text-lg sm:text-xl font-semibold my-2 text-slate-700"></p>
                        <p class="text-base sm:text-lg">Với số điểm</p>
                        <p id="cert-score" class="text-3xl sm:text-4xl font-bold text-green-600 my-4"></p>
                        <p class="text-xs sm:text-sm text-slate-500">Ngày hoàn thành: <span id="cert-date"></span></p>
                    </div>
                </div>
                <div class="flex flex-col sm:flex-row justify-center gap-4 mt-4">
                    <button id="review-btn-from-cert" class="btn btn-slate">Xem lại đáp án</button>
                    <button id="close-cert-btn" class="btn btn-blue">Đóng</button>
                </div>
            </div>`;
    }

    function cacheElements() {
        const ids = [
            'name-input', 'department-input', 'mode-selection-area', 'error-message', 'start-btn',
            'question-count', 'score-display', 'progress-bar', 'question-text', 'answers-container',
            'feedback-area', 'next-btn', 'result-title', 'score-text', 'fail-message', 'review-btn',
            'certificate-btn', 'restart-btn', 'review-container', 'certificate-btn-from-review',
            'restart-from-review-btn', 'certificate-wrapper', 'cert-name', 'cert-department',
            'cert-quiz-name', 'cert-score', 'cert-date', 'review-btn-from-cert', 'close-cert-btn'
        ];
        ids.forEach(id => {
            elements[id.replace(/-(\w)/g, (m, p1) => p1.toUpperCase())] = document.getElementById(id);
        });
    }

    document.addEventListener('DOMContentLoaded', () => {
        setupHTML();
        cacheElements();
        if (!answerKey || !quizDataForClient) {
            document.body.innerHTML = `<p style='font-family: sans-serif; text-align: center; margin-top: 50px; font-size: 1.2rem; color: #b91c1c;'>Lỗi nghiêm trọng: Dữ liệu trò chơi bị hỏng.</p>`;
            return;
        }
        setupModeSelection();
        addEventListeners();
        resetGame();
    });
    
    function setupModeSelection() {
        const topics = [...new Set(quizDataForClient.map(q => q.topic))].filter(Boolean);
        let html = `
            <div id="random-mode-group">
                <p class="font-semibold text-slate-800 text-center mb-3">Chơi ngẫu nhiên</p>
                <div class="flex flex-wrap justify-center gap-3">
                    <button class="mode-btn bg-white border border-slate-300 text-slate-700 font-semibold py-2 px-5 rounded-lg" data-mode="random" data-count="5">5 câu</button>
                    <button class="mode-btn bg-white border border-slate-300 text-slate-700 font-semibold py-2 px-5 rounded-lg" data-mode="random" data-count="30">30 câu</button>
                    <button class="mode-btn bg-white border border-slate-300 text-slate-700 font-semibold py-2 px-5 rounded-lg" data-mode="random" data-count="all">Toàn bộ</button>
                </div>
            </div>`;
        if (topics.length > 0) {
            html += `
                <div id="topic-mode-group" class="mt-6">
                    <p class="font-semibold text-slate-800 text-center mb-3">Chơi theo chủ đề</p>
                    <div class="flex flex-wrap justify-center gap-3">
                        ${topics.map(topic => `<button class="mode-btn bg-white border border-slate-300 text-slate-700 font-semibold py-2 px-5 rounded-lg" data-mode="topic" data-topic="${topic}">${topic}</button>`).join('')}
                    </div>
                </div>`;
        }
        elements.modeSelectionArea.innerHTML = html;
        
        document.querySelectorAll('.mode-btn').forEach(button => {
            button.addEventListener('click', (e) => {
                document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('btn-selected-green'));
                e.currentTarget.classList.add('btn-selected-green');
                selectedMode = e.currentTarget.dataset;
            });
        });
    }

    function addEventListeners() {
        elements.startBtn.addEventListener('click', startGame);
        elements.nextBtn.addEventListener('click', nextQuestion);
        elements.restartBtn.addEventListener('click', resetGame);
        elements.restartFromReviewBtn.addEventListener('click', resetGame);
        elements.reviewBtn.addEventListener('click', showReview);
        elements.certificateBtn.addEventListener('click', showCertificate);
        elements.closeCertBtn.addEventListener('click', closeCertificate);
        elements.certificateBtnFromReview.addEventListener('click', showCertificate);
        elements.reviewBtnFromCert.addEventListener('click', showReview);
        document.addEventListener('fullscreenchange', () => {
            if (!document.fullscreenElement && !elements.certificateScreen.classList.contains('hidden')) {
                showScreen('resultArea');
            }
        });
    }

    function showScreen(screenKey) {
        ['startScreen', 'quizContainer', 'resultArea', 'reviewScreen', 'certificateScreen'].forEach(key => {
            elements[key].classList.add('hidden');
        });
        elements[screenKey].classList.remove('hidden');
        document.querySelector('main').style.display = (screenKey === 'certificateScreen') ? 'none' : 'block';
    }

    function startGame() {
        userInfo = { name: elements.nameInput.value.trim(), department: elements.departmentInput.value.trim() };
        if (!userInfo.name || !userInfo.department) {
            elements.errorMessage.innerText = 'Vui lòng điền đầy đủ Họ và tên và Phòng ban.'; return;
        }
        if (!selectedMode || !selectedMode.mode) {
            elements.errorMessage.innerText = 'Vui lòng chọn một chế độ chơi.'; return;
        }
        elements.errorMessage.innerText = '';
        prepareQuestions();
        if (questionsForGame.length === 0) {
            elements.errorMessage.innerText = 'Không có câu hỏi cho chủ đề này.'; return;
        }
        showScreen('quizContainer');
        showQuestion();
    }

    function prepareQuestions() {
        let source = [...quizDataForClient];
        if (selectedMode.mode === 'topic') {
            source = source.filter(q => q.topic === selectedMode.topic);
        }
        source = shuffleArray(source);
        if (selectedMode.count && selectedMode.count !== 'all') {
            questionsForGame = source.slice(0, parseInt(selectedMode.count, 10));
        } else { questionsForGame = source; }
    }

    function showQuestion() {
        elements.feedbackArea.innerHTML = '';
        elements.nextBtn.classList.add('hidden');
        const q = questionsForGame[currentQuestionIndex];
        elements.questionCount.innerText = `Câu ${currentQuestionIndex + 1}/${questionsForGame.length}`;
        elements.progressBar.style.width = `${((currentQuestionIndex + 1) / questionsForGame.length) * 100}%`;
        elements.questionText.innerText = q.question;
        elements.answersContainer.innerHTML = '';
        shuffleArray([...q.answers]).forEach(ans => {
            const btn = document.createElement('button');
            btn.innerHTML = `<span>${ans.text}</span>`;
            btn.className = 'w-full text-left p-4 bg-white/80 border-2 border-slate-300 rounded-lg hover:bg-blue-100 hover:border-kv-blue transition-all duration-200 flex items-center';
            btn.dataset.answerId = ans.id;
            btn.dataset.questionId = q.id;
            btn.onclick = selectAnswer;
            elements.answersContainer.appendChild(btn);
        });
    }

    function selectAnswer(e) {
        const selectedBtn = e.currentTarget;
        const { questionId, answerId } = selectedBtn.dataset;
        const isCorrect = answerId === answerKey[questionId];

        gameResults.push({
            question: questionsForGame[currentQuestionIndex],
            selectedAnswerId: answerId,
            correctAnswerId: answerKey[questionId],
            isCorrect
        });

        const feedback = document.createElement('p');
        feedback.className = 'font-medium text-lg';
        if (isCorrect) {
            score++;
            elements.scoreDisplay.innerText = `Điểm: ${score}`;
            feedback.innerHTML = '🎉 Chúc mừng bạn, đáp án hoàn toàn chính xác!';
            feedback.className += ' text-green-600';
            selectedBtn.classList.add('correct');
        } else {
            feedback.innerHTML = feedbackMessages.incorrect; // Changed to innerHTML to render the link
            feedback.className += ' text-red-500';
            selectedBtn.classList.add('incorrect');
        }
        elements.feedbackArea.appendChild(feedback);
        Array.from(elements.answersContainer.children).forEach(button => button.onclick = null);
        elements.nextBtn.classList.remove('hidden');
    }

    function nextQuestion() {
        currentQuestionIndex++;
        (currentQuestionIndex < questionsForGame.length) ? showQuestion() : showScore();
    }

    function showScore() {
        const percentage = (score / questionsForGame.length) * 100;
        elements.scoreText.innerText = `Bạn đã trả lời đúng ${score}/${questionsForGame.length} câu (${percentage.toFixed(0)}%)`;
        const passed = percentage >= 80;
        elements.resultTitle.innerText = passed ? "Xuất sắc!" : "Hoàn thành!";
        elements.failMessage.classList.toggle('hidden', passed);
        elements.certificateBtn.classList.toggle('hidden', !passed);
        elements.certificateBtnFromReview.classList.toggle('hidden', !passed);
        if (passed) confetti({ particleCount: 150, spread: 90, origin: { y: 0.6 } });
        showScreen('resultArea');
    }

    function showReview() {
        const correct = gameResults.filter(r => r.isCorrect);
        const incorrect = gameResults.filter(r => !r.isCorrect);

        const render = (results, title, isCorrectSection) => {
            if (results.length === 0) return '';
            let html = `<div class="mb-8"><h3 class="text-xl font-bold ${isCorrectSection ? 'text-green-600' : 'text-red-600'} border-b-2 pb-2 mb-4">${title} (${results.length})</h3><div class="space-y-4">`;
            results.forEach(r => {
                html += `<div class="p-4 bg-white/50 rounded-lg shadow-sm">
                    <p class="font-semibold text-slate-800 mb-3">${r.question.question}</p>
                    <div class="space-y-2 text-sm">`;
                r.question.answers.forEach(ans => {
                    let classes = 'review-answer flex items-center p-3 rounded-md border border-slate-200';
                    let icon = '';
                    if (isCorrectSection && ans.id === r.correctAnswerId) {
                        classes += ' is-correct-answer';
                        icon = `<i class="fas fa-check-circle text-green-500 mr-3"></i>`;
                    } else if (!isCorrectSection && ans.id === r.selectedAnswerId) {
                        classes += ' is-selected-incorrect';
                        icon = `<i class="fas fa-times-circle text-red-500 mr-3"></i>`;
                    }
                    html += `<div class="${classes}">${icon}<span>${ans.text}</span></div>`;
                });
                html += `</div></div>`;
            });
            return html + '</div></div>';
        };
        elements.reviewContainer.innerHTML = render(correct, 'Các câu trả lời đúng', true) + render(incorrect, 'Các câu cần xem lại', false);
        showScreen('reviewScreen');
    }

    function showCertificate() {
        elements.certName.innerText = userInfo.name;
        elements.certDepartment.innerText = `Phòng ban: ${userInfo.department}`;
        elements.certQuizName.innerText = document.title;
        elements.certScore.innerText = `${score}/${questionsForGame.length}`;
        elements.certDate.innerText = new Date().toLocaleDateString('vi-VN');
        showScreen('certificateScreen');
        if (elements.certificateWrapper.requestFullscreen) elements.certificateWrapper.requestFullscreen();
        else if (elements.certificateWrapper.webkitRequestFullscreen) elements.certificateWrapper.webkitRequestFullscreen();
    }

    function closeCertificate() {
        if (document.fullscreenElement || document.webkitFullscreenElement) {
            if (document.exitFullscreen) document.exitFullscreen();
            else if (document.webkitExitFullscreen) document.webkitExitFullscreen();
        }
        showScreen('resultArea');
    }
    
    function resetGame() {
        currentQuestionIndex = 0; score = 0;
        gameResults = []; questionsForGame = []; selectedMode = {}; userInfo = {};
        if (document.querySelectorAll('.mode-btn').length > 0) {
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('btn-selected-green'));
        }
        if(elements.scoreDisplay) elements.scoreDisplay.innerText = `Điểm: 0`;
        if(elements.progressBar) elements.progressBar.style.width = '0%';
        showScreen('startScreen');
    }

    function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
    }</script></body></html>
