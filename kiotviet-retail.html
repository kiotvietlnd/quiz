<!DOCTYPE html>
<html lang="vi" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KiotViet Quiz Game</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Confetti JS -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* Custom Design System Styles from Template */
        body {    
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Fallback background */
            touch-action: manipulation;
        }

        /* Soft Glow & Gradient Foundation */
        @keyframes moveInCircle { 0% { transform: rotate(0deg); } 50% { transform: rotate(180deg); } 100% { transform: rotate(360deg); } }
        @keyframes moveVertical { 0% { transform: translateY(-50%); } 50% { transform: translateY(50%); } 100% { transform: translateY(-50%); } }
        @keyframes moveHorizontal { 0% { transform: translateX(-50%); } 50% { transform: translateX(50%); } 100% { transform: translateX(-50%); } }
        
        .soft-glow-background { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -10; background: linear-gradient(to bottom right, #f8fafc, #e0f2fe); }
        .soft-glow-background .shape { position: absolute; filter: blur(140px); opacity: 0.25; }
        .soft-glow-background .shape1 { height: 350px; width: 350px; background: #166def; border-radius: 50%; top: -50px; left: -100px; animation: moveInCircle 22s ease-in-out infinite; }
        .soft-glow-background .shape2 { height: 450px; width: 450px; background: #16a34a; border-radius: 50%; bottom: -100px; right: -100px; animation: moveVertical 28s ease-in-out infinite; }
        .soft-glow-background .shape3 { height: 300px; width: 500px; background: #f97316; border-radius: 50%; top: 50%; left: 50%; animation: moveHorizontal 35s ease-in-out infinite; }
        
        .kv-blue { color: #166def; }
        .bg-kv-blue { background-color: #166def; }
        .hover\:bg-kv-blue-dark:hover { background-color: #0a58ca; }
        .border-kv-blue { border-color: #166def; }

        .main-card { background-color: rgba(255, 255, 255, 0.7); backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px); border: 1px solid rgba(203, 213, 225, 0.5); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04); }
        .mode-btn { transition: all 0.2s ease; }
        .mode-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); }

        .correct { background-color: #10B981 !important; color: white !important; border-color: #059669 !important; }
        .incorrect { background-color: #EF4444 !important; color: white !important; border-color: #DC2626 !important; }
        .fade-in { animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .certificate {
            border: 10px solid #166def;
            padding: 2rem;
            background: linear-gradient(135deg, #ffffff 0%, #f7faff 100%);
            position: relative;
        }
    </style>
</head>
<body class="text-slate-700 antialiased flex items-center justify-center min-h-screen p-4">

    <!-- The Soft Glow & Gradient Foundation -->
    <div class="soft-glow-background">
        <div class="shape shape1"></div>
        <div class="shape shape2"></div>
        <div class="shape shape3"></div>
    </div>
    
    <main class="w-full max-w-2xl">
        <!-- Start Screen -->
        <div id="start-screen" class="main-card rounded-2xl p-6 sm:p-8 lg:p-10 fade-in">
            <img src="https://logo.kiotviet.vn/KiotViet-Logo-Horizontal.svg" alt="KiotViet Logo" class="h-10 mx-auto mb-6">
            <h1 class="text-2xl sm:text-3xl font-bold text-slate-800 text-center mb-2">Quiz Game KiotViet Retail</h1>
            <p class="text-slate-600 text-center mb-8">Vui l√≤ng nh·∫≠p th√¥ng tin v√† ch·ªçn ch·∫ø ƒë·ªô ch∆°i</p>
            
            <div class="space-y-4 mb-6">
                <div>
                    <label for="name-input" class="block text-sm font-medium text-slate-700 mb-1">H·ªç v√† t√™n</label>
                    <input type="text" id="name-input" class="w-full p-3 bg-white/80 border border-slate-300 rounded-lg focus:ring-2 focus:ring-kv-blue focus:border-kv-blue" placeholder="Nguy·ªÖn VƒÉn A">
                </div>
                <div>
                    <label for="department-input" class="block text-sm font-medium text-slate-700 mb-1">Ph√≤ng ban</label>
                    <input type="text" id="department-input" class="w-full p-3 bg-white/80 border border-slate-300 rounded-lg focus:ring-2 focus:ring-kv-blue focus:border-kv-blue" placeholder="TSHNI99">
                </div>
            </div>
            
            <p id="error-message" class="text-red-500 text-center mb-4 h-5"></p>

            <div class="grid grid-cols-2 gap-4">
                <button data-mode="5" class="mode-btn w-full bg-slate-700 hover:bg-slate-800 text-white font-bold py-3 px-4 rounded-lg text-base">5 c√¢u ng·∫´u nhi√™n</button>
                <button data-mode="10" class="mode-btn w-full bg-slate-700 hover:bg-slate-800 text-white font-bold py-3 px-4 rounded-lg text-base">10 c√¢u ng·∫´u nhi√™n</button>
                <button data-mode="15" class="mode-btn w-full bg-slate-700 hover:bg-slate-800 text-white font-bold py-3 px-4 rounded-lg text-base">15 c√¢u ng·∫´u nhi√™n</button>
                <button data-mode="all" class="mode-btn w-full bg-slate-700 hover:bg-slate-800 text-white font-bold py-3 px-4 rounded-lg text-base">To√†n b·ªô (30 c√¢u)</button>
            </div>
             <div class="mt-6">
                <button id="start-game-btn" class="w-full bg-kv-blue hover:bg-kv-blue-dark text-white font-bold py-4 px-6 rounded-lg text-xl opacity-0 -translate-y-2 pointer-events-none transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed" disabled>B·∫Øt ƒë·∫ßu</button>
            </div>
        </div>

        <!-- Quiz Container -->
        <div id="quiz-container" class="main-card rounded-2xl p-6 sm:p-8 lg:p-10 hidden">
            <!-- Header -->
            <div class="flex justify-between items-center mb-6">
                <div id="score-display" class="text-lg font-bold kv-blue">ƒêi·ªÉm: 0</div>
                <div id="progress-text" class="text-lg font-semibold text-slate-600">C√¢u 1/5</div>
            </div>
            <div class="w-full bg-slate-200 rounded-full h-2.5 mb-8">
                <div id="progress-bar" class="bg-kv-blue h-2.5 rounded-full transition-all duration-300" style="width: 0%"></div>
            </div>
            <div id="question-area">
                <h2 id="question-text" class="text-xl font-semibold text-slate-800 mb-6 min-h-[80px]"></h2>
                <div id="answer-options" class="grid grid-cols-1 sm:grid-cols-2 gap-4"></div>
                <div id="feedback-area" class="mt-4 text-center min-h-[50px] text-base"></div>
            </div>
            <div class="mt-8 text-right">
                <button id="next-btn" class="bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 px-8 rounded-lg text-lg transition-colors hidden">C√¢u ti·∫øp theo</button>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="result-area" class="main-card rounded-2xl p-6 sm:p-8 lg:p-10 hidden text-center">
            <h2 id="result-title" class="text-3xl font-bold text-slate-800 mb-4"></h2>
            <p id="score-text" class="text-xl text-slate-600 mb-6"></p>
            <div id="fail-message" class="hidden text-red-500 font-medium text-base mb-6"></div>
            <div class="flex justify-center gap-4">
                 <button id="certificate-btn" class="hidden w-full sm:w-auto bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-8 rounded-lg text-lg">Xem gi·∫•y khen</button>
                 <button id="restart-btn" class="w-full sm:w-auto bg-kv-blue hover:bg-kv-blue-dark text-white font-bold py-3 px-8 rounded-lg text-lg">Ch∆°i l·∫°i</button>
            </div>
        </div>
        
        <!-- Certificate Screen -->
        <div id="certificate-screen" class="main-card rounded-2xl p-6 sm:p-8 hidden fade-in text-center">
             <div class="certificate">
                <img src="https://logo.kiotviet.vn/KiotViet-Logo-Horizontal.svg" alt="KiotViet Logo" class="h-8 mx-auto mb-6">
                <h2 class="text-4xl font-extrabold text-kv-blue" style="font-family: 'Times New Roman', serif;"><i class="fas fa-trophy text-yellow-400 mr-3"></i>GI·∫§Y KHEN</h2>
                <p class="mt-6 text-lg text-slate-700">Tr√¢n tr·ªçng trao t·∫∑ng:</p>
                <p id="cert-name" class="text-2xl font-bold text-slate-800 my-2"></p>
                <p id="cert-department" class="text-lg text-slate-600"></p>
                <p class="mt-4 text-lg text-slate-700">ƒê√£ xu·∫•t s·∫Øc ho√†n th√†nh <strong>Quiz Game KiotViet Retail</strong></p>
                <p id="cert-mode" class="mt-2 text-slate-600 font-medium"></p>
                <p id="cert-score" class="text-xl font-semibold text-slate-800 my-2"></p>
                <p id="cert-date" class="mt-8 text-slate-500"></p>
             </div>
             <button id="restart-from-cert-btn" class="mt-8 w-full sm:w-auto bg-kv-blue hover:bg-kv-blue-dark text-white font-bold py-3 px-8 rounded-lg text-lg">Ch∆°i l·∫°i</button>
        </div>
    </main>
    <script>
        const quizData = [
            { question: "ƒê·ªÉ t√¨m ki·∫øm s·∫£n ph·∫©m trong KiotViet khi nh·ªõ ch√≠nh x√°c m√£ h√†ng, b·∫°n c·∫ßn nh·∫≠p th√¥ng tin n√†o v√†o √¥ t√¨m ki·∫øm?", answers: [{ text: "M·ªôt ph·∫ßn t√™n s·∫£n ph·∫©m", correct: false }, { text: "T·ª´ kh√≥a li√™n quan", correct: false }, { text: "M√£ h√†ng n·ªôi b·ªô ho·∫∑c m√£ v·∫°ch c·ªßa nh√† s·∫£n xu·∫•t", correct: true }, { text: "Gi√° b√°n s·∫£n ph·∫©m", correct: false }] },
            { question: "N·∫øu kh√¥ng nh·ªõ ch√≠nh x√°c t√™n s·∫£n ph·∫©m, b·∫°n c√≥ th·ªÉ t√¨m ki·∫øm b·∫±ng c√°ch n√†o?", answers: [{ text: "Ch·ªâ c√≥ th·ªÉ t√¨m ki·∫øm b·∫±ng m√£ s·∫£n ph·∫©m", correct: false }, { text: "G√µ m·ªôt ph·∫ßn t√™n ho·∫∑c t·ª´ kh√≥a li√™n quan", correct: true }, { text: "Nh·∫•n v√†o bi·ªÉu t∆∞·ª£ng \"Danh m·ª•c\"", correct: false }, { text: "Tra c·ª©u chi ti·∫øt s·∫£n ph·∫©m", correct: false }] },
            { question: "Khi t√¨m ki·∫øm b·∫±ng m·ªôt ph·∫ßn t√™n ho·∫∑c t·ª´ kh√≥a, h·ªá th·ªëng KiotViet s·∫Ω hi·ªÉn th·ªã g√¨?", answers: [{ text: "Ch·ªâ c√≥ m·ªôt k·∫øt qu·∫£ duy nh·∫•t", correct: false }, { text: "Th√¥ng b√°o l·ªói", correct: false }, { text: "Danh s√°ch c√°c g·ª£i √Ω ngay l·∫≠p t·ª©c", correct: true }, { text: "M√†n h√¨nh th√™m s·∫£n ph·∫©m m·ªõi", correct: false }] },
            { question: "ƒê·ªÉ l·ªçc s·∫£n ph·∫©m theo nh√≥m h√†ng trong ch·∫ø ƒë·ªô \"B√°n th∆∞·ªùng\" tr√™n m√†n h√¨nh b√°n h√†ng, b·∫°n c·∫ßn l√†m g√¨?", answers: [{ text: "V√†o m·ª•c \"T√πy ch·ªçn Hi·ªÉn th·ªã\"", correct: false }, { text: "Nh·∫•n v√†o icon \"Danh m·ª•c\"", correct: true }, { text: "Nh·∫≠p t√™n nh√≥m h√†ng v√†o √¥ t√¨m ki·∫øm", correct: false }, { text: "B·∫•m v√†o h√¨nh ·∫£nh s·∫£n ph·∫©m", correct: false }] },
            { question: "L√†m th·∫ø n√†o ƒë·ªÉ hi·ªÉn th·ªã s·ªë l∆∞·ª£ng t·ªìn kho tr·ª±c ti·∫øp tr√™n m·ªói s·∫£n ph·∫©m tr√™n m√†n h√¨nh b√°n h√†ng?", answers: [{ text: "T√¨m ki·∫øm s·∫£n ph·∫©m b·∫±ng m√£ v·∫°ch", correct: false }, { text: "Nh·∫•n v√†o icon \"Danh m·ª•c\"", correct: false }, { text: "V√†o m·ª•c \"T√πy ch·ªçn Hi·ªÉn th·ªã\" > \"Kh√°c\" v√† b·∫≠t t√πy ch·ªçn \"T·ªìn kho\"", correct: true }, { text: "B·∫•m v√†o h√¨nh ·∫£nh c·ªßa s·∫£n ph·∫©m ƒë·ªÉ xem chi ti·∫øt", correct: false }] },
            { question: "T√≠nh nƒÉng xem t·ªìn kho tr√™n m√†n h√¨nh b√°n h√†ng gi√∫p ch·ªß c·ª≠a h√†ng B√¨nh Minh l√†m g√¨?", answers: [{ text: "Th√™m s·∫£n ph·∫©m m·ªõi", correct: false }, { text: "Tra c·ª©u chi ti·∫øt v·ªã tr√≠ s·∫£n ph·∫©m", correct: false }, { text: "Theo d√µi s·ªë l∆∞·ª£ng t·ªìn ngay tr√™n m·ªói s·∫£n ph·∫©m", correct: true }, { text: "X·ª≠ l√Ω ƒë∆°n h√†ng ƒë√£ b√°n", correct: false }] },
            { question: "B·∫°n c√≥ th·ªÉ tra c·ª©u v·ªã tr√≠ c·ªßa m·ªôt s·∫£n ph·∫©m m√† kh√¥ng c·∫ßn th√™m n√≥ v√†o ƒë∆°n h√†ng kh√¥ng?", answers: [{ text: "Kh√¥ng, b·∫Øt bu·ªôc ph·∫£i th√™m v√†o ƒë∆°n h√†ng", correct: false }, { text: "C√≥, sau khi t√¨m ki·∫øm, b·∫•m v√†o h√¨nh ·∫£nh c·ªßa s·∫£n ph·∫©m", correct: true }, { text: "Ch·ªâ khi s·∫£n ph·∫©m ƒë√≥ l√† s·∫£n ph·∫©m m·ªõi", correct: false }, { text: "Ch·ªâ khi c√≥ m√£ v·∫°ch", correct: false }] },
            { question: "Sau khi b·∫•m v√†o h√¨nh ·∫£nh s·∫£n ph·∫©m trong k·∫øt qu·∫£ g·ª£i √Ω, c·ª≠a s·ªï chi ti·∫øt s·∫£n ph·∫©m s·∫Ω hi·ªÉn th·ªã nh·ªØng th√¥ng tin g√¨?", answers: [{ text: "Ch·ªâ t√™n v√† gi√° b√°n", correct: false }, { text: "V·ªã tr√≠ v√† c√°c th√¥ng tin quan tr·ªçng kh√°c c·ªßa s·∫£n ph·∫©m", correct: true }, { text: "L·ªãch s·ª≠ b√°n h√†ng c·ªßa s·∫£n ph·∫©m", correct: false }, { text: "T√πy ch·ªçn th√™m s·∫£n ph·∫©m m·ªõi", correct: false }] },
            { question: "N·∫øu m·ªôt s·∫£n ph·∫©m kh√¥ng hi·ªÉn th·ªã trong k·∫øt qu·∫£ t√¨m ki·∫øm, b∆∞·ªõc ƒë·∫ßu ti√™n b·∫°n n√™n l√†m g√¨?", answers: [{ text: "Th√™m s·∫£n ph·∫©m m·ªõi ngay l·∫≠p t·ª©c", correct: false }, { text: "Li√™n h·ªá h·ªó tr·ª£ KiotViet", correct: false }, { text: "ƒê·∫£m b·∫£o r·∫±ng s·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c th√™m ƒë√∫ng c√°ch v√†o h·ªá th·ªëng t·ªìn kho", correct: true }, { text: "Thay ƒë·ªïi t·ª´ kh√≥a t√¨m ki·∫øm", correct: false }] },
            { question: "ƒê·ªÉ ki·ªÉm tra tr·∫°ng th√°i c·ªßa m·ªôt s·∫£n ph·∫©m kh√¥ng hi·ªÉn th·ªã, b·∫°n c√≥ th·ªÉ xem ·ªü ƒë√¢u trong KiotViet?", answers: [{ text: "M√†n h√¨nh b√°n h√†ng", correct: false }, { text: "M·ª•c \"T√πy ch·ªçn Hi·ªÉn th·ªã\"", correct: false }, { text: "Danh m·ª•c H√†ng h√≥a", correct: true }, { text: "B√°o c√°o doanh thu", correct: false }] },
            { question: "N·∫øu b·∫°n mu·ªën th√™m m·ªôt s·∫£n ph·∫©m ho√†n to√†n m·ªõi ch∆∞a c√≥ trong h·ªá th·ªëng KiotViet, b·∫°n s·∫Ω t√¨m t√πy ch·ªçn n√†o?", answers: [{ text: "B·∫•m v√†o h√¨nh ·∫£nh c·ªßa m·ªôt s·∫£n ph·∫©m b·∫•t k·ª≥", correct: false }, { text: "V√†o m·ª•c \"T√πy ch·ªçn Hi·ªÉn th·ªã\"", correct: false }, { text: "\"Th√™m s·∫£n ph·∫©m m·ªõi\" ngay d∆∞·ªõi thanh t√¨m ki·∫øm", correct: true }, { text: "Trong danh m·ª•c H√†ng h√≥a", correct: false }] },
            { question: "Khi s·ª≠ d·ª•ng t√πy ch·ªçn \"Th√™m s·∫£n ph·∫©m m·ªõi\", nh·ªØng th√¥ng tin c·∫ßn thi·∫øt n√†o c√≥ th·ªÉ ƒë∆∞·ª£c nh·∫≠p ngay l·∫≠p t·ª©c?", answers: [{ text: "Ch·ªâ m√£ h√†ng", correct: false }, { text: "Ch·ªâ gi√° b√°n", correct: false }, { text: "Ch·ªâ t·ªìn kho", correct: false }, { text: "T√™n, m√£ h√†ng, gi√° b√°n v√† t·ªìn kho", correct: true }] },
            { question: "Khi th√™m s·∫£n ph·∫©m m·ªõi th√¥ng qua thanh t√¨m ki·∫øm, s·∫£n ph·∫©m ƒë√≥ s·∫Ω ƒë∆∞·ª£c l∆∞u v√†o ƒë√¢u?", answers: [{ text: "Ch·ªâ v√†o ƒë∆°n h√†ng hi·ªán t·∫°i", correct: false }, { text: "V√†o ƒë∆°n h√†ng v√† l∆∞u v√†o h·ªá th·ªëng", correct: true }, { text: "Ch·ªâ v√†o danh m·ª•c h√†ng h√≥a t·∫°m th·ªùi", correct: false }, { text: "Kh√¥ng l∆∞u t·ª± ƒë·ªông, c·∫ßn thao t√°c th√™m sau", correct: false }] },
            { question: "C√°c t√πy ch·ªçn t√¨m ki·∫øm trong KiotViet ƒë∆∞·ª£c ƒë√°nh gi√° l√† g√¨?", answers: [{ text: "H·∫°n ch·∫ø", correct: false }, { text: "R·∫•t linh ho·∫°t", correct: true }, { text: "Ph·ª©c t·∫°p", correct: false }, { text: "Ch·ªâ d√†nh cho ng∆∞·ªùi nh·ªõ m√£ h√†ng", correct: false }] },
            { question: "Ch·ª©c nƒÉng tra c·ª©u chi ti·∫øt s·∫£n ph·∫©m cho ph√©p xem th√¥ng tin g√¨ ngo√†i v·ªã tr√≠?", answers: [{ text: "Ch·ªâ t·ªìn kho", correct: false }, { text: "Ch·ªâ gi√° v·ªën", correct: false }, { text: "C√°c th√¥ng tin quan tr·ªçng kh√°c c·ªßa s·∫£n ph·∫©m ƒë√≥", correct: true }, { text: "L·ªãch s·ª≠ nh·∫≠p h√†ng", correct: false }] },
            { question: "Trong ch·∫ø ƒë·ªô \"B√°n th∆∞·ªùng\", icon \"Danh m·ª•c\" c√≥ ch·ª©c nƒÉng g√¨?", answers: [{ text: "Th√™m s·∫£n ph·∫©m m·ªõi", correct: false }, { text: "L·ªçc s·∫£n ph·∫©m theo nh√≥m h√†ng", correct: true }, { text: "ƒêi·ªÅu ch·ªânh gi√° b√°n", correct: false }, { text: "Xem b√°o c√°o doanh thu", correct: false }] },
            { question: "N·∫øu B√¨nh Minh c·∫ßn xem s·ªë l∆∞·ª£ng t·ªìn kho m·ªôt c√°ch nhanh ch√≥ng tr√™n m√†n h√¨nh b√°n h√†ng, c√¥ ·∫•y n√™n k√≠ch ho·∫°t t√πy ch·ªçn n√†o?", answers: [{ text: "T√πy ch·ªçn \"Gi√° b√°n\"", correct: false }, { text: "T√πy ch·ªçn \"T·ªìn kho\"", correct: true }, { text: "T√πy ch·ªçn \"V·ªã tr√≠\"", correct: false }, { text: "T√πy ch·ªçn \"M√£ h√†ng\"", correct: false }] },
            { question: "Vi·ªác tra c·ª©u chi ti·∫øt s·∫£n ph·∫©m b·∫±ng c√°ch b·∫•m v√†o h√¨nh ·∫£nh s·∫£n ph·∫©m trong k·∫øt qu·∫£ g·ª£i √Ω l√† m·ªôt t√≠nh nƒÉng gi√∫p:", answers: [{ text: "R√∫t ng·∫Øn th·ªùi gian thanh to√°n", correct: false }, { text: "Hi·ªÉu r√µ h∆°n v·ªÅ s·∫£n ph·∫©m m√† kh√¥ng c·∫ßn th√™m v√†o ƒë∆°n h√†ng", correct: true }, { text: "Thay ƒë·ªïi th√¥ng tin s·∫£n ph·∫©m", correct: false }, { text: "Xem h√¨nh ·∫£nh l·ªõn h∆°n", correct: false }] },
            { question: "Khi B√¨nh Minh g·∫∑p kh√≥ khƒÉn v√¨ kh√¥ng nh·ªõ ch√≠nh x√°c t√™n ho·∫∑c m√£ h√†ng, KiotViet ƒë√£ gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ n√†y nh∆∞ th·∫ø n√†o?", answers: [{ text: "Y√™u c·∫ßu nh·∫≠p ƒë√∫ng th√¥ng tin", correct: false }, { text: "Ch·ªâ t√¨m ki·∫øm ƒë∆∞·ª£c n·∫øu c√≥ m√£ v·∫°ch", correct: false }, { text: "Cho ph√©p g√µ m·ªôt ph·∫ßn t√™n ho·∫∑c t·ª´ kh√≥a li√™n quan", correct: true }, { text: "Y√™u c·∫ßu ki·ªÉm tra l·∫°i danh m·ª•c h√†ng h√≥a", correct: false }] },
            { question: "M·ª•c \"T√πy ch·ªçn Hi·ªÉn th·ªã\" > \"Kh√°c\" trong KiotViet d√πng ƒë·ªÉ l√†m g√¨?", answers: [{ text: "Thay ƒë·ªïi giao di·ªán ng∆∞·ªùi d√πng", correct: false }, { text: "B·∫≠t/t·∫Øt c√°c t√πy ch·ªçn hi·ªÉn th·ªã th√¥ng tin nh∆∞ t·ªìn kho", correct: true }, { text: "Thi·∫øt l·∫≠p m√£ v·∫°ch cho s·∫£n ph·∫©m", correct: false }, { text: "Qu·∫£n l√Ω quy·ªÅn truy c·∫≠p", correct: false }] },
            { question: "N·∫øu m·ªôt s·∫£n ph·∫©m m·ªõi ƒë∆∞·ª£c th√™m v√†o h·ªá th·ªëng KiotViet th√¥ng qua t√πy ch·ªçn \"Th√™m s·∫£n ph·∫©m m·ªõi\" d∆∞·ªõi thanh t√¨m ki·∫øm, s·∫£n ph·∫©m ƒë√≥ c√≥ s·∫µn s√†ng ƒë·ªÉ b√°n kh√¥ng?", answers: [{ text: "Kh√¥ng, c·∫ßn th√™m b∆∞·ªõc ph√™ duy·ªát", correct: false }, { text: "Ch·ªâ khi c√≥ m√£ v·∫°ch", correct: false }, { text: "C√≥, c√°c th√¥ng tin c·∫ßn thi·∫øt ƒë√£ ƒë∆∞·ª£c nh·∫≠p ƒë·ªÉ th√™m ngay v√†o ƒë∆°n h√†ng", correct: true }, { text: "Ch·ªâ khi c√≥ t·ªìn kho l·ªõn h∆°n 0", correct: false }] },
            { question: "M·ª•c ƒë√≠ch ch√≠nh c·ªßa vi·ªác l·ªçc s·∫£n ph·∫©m theo nh√≥m h√†ng l√† g√¨?", answers: [{ text: "ƒê·ªÉ in tem nh√£n", correct: false }, { text: "Gi√∫p ng∆∞·ªùi d√πng d·ªÖ d√†ng t√¨m ki·∫øm v√† qu·∫£n l√Ω s·∫£n ph·∫©m trong c√°c danh m·ª•c c·ª• th·ªÉ", correct: true }, { text: "ƒê·ªÉ thay ƒë·ªïi gi√° b√°n ƒë·ªìng lo·∫°t", correct: false }, { text: "ƒê·ªÉ ki·ªÉm tra l·ªãch s·ª≠ nh·∫≠p h√†ng", correct: false }] },
            { question: "Kh·∫£ nƒÉng tra c·ª©u v·ªã tr√≠ s·∫£n ph·∫©m l√† ƒë·∫∑c ƒëi·ªÉm h·ªØu √≠ch cho ai?", answers: [{ text: "Kh√°ch h√†ng mua s·∫Øm", correct: false }, { text: "Ng∆∞·ªùi qu·∫£n l√Ω kho ho·∫∑c nh√¢n vi√™n b√°n h√†ng c·∫ßn bi·∫øt v·ªã tr√≠ c·ª• th·ªÉ c·ªßa s·∫£n ph·∫©m", correct: true }, { text: "K·∫ø to√°n", correct: false }, { text: "Nh√† cung c·∫•p", correct: false }] },
            { question: "N·∫øu b·∫°n c·∫ßn nh·∫≠p th√¥ng tin t·ªìn kho cho m·ªôt s·∫£n ph·∫©m m·ªõi, b·∫°n c√≥ th·ªÉ th·ª±c hi·ªán ƒëi·ªÅu ƒë√≥ ·ªü ƒë√¢u khi s·ª≠ d·ª•ng t√≠nh nƒÉng \"Th√™m s·∫£n ph·∫©m m·ªõi\"?", answers: [{ text: "Ch·ªâ trong danh m·ª•c H√†ng h√≥a sau khi l∆∞u", correct: false }, { text: "Ngay trong c·ª≠a s·ªï \"Th√™m s·∫£n ph·∫©m m·ªõi\"", correct: true }, { text: "Th√¥ng qua m√†n h√¨nh \"T√πy ch·ªçn Hi·ªÉn th·ªã\"", correct: false }, { text: "Kh√¥ng th·ªÉ nh·∫≠p t·ªìn kho cho s·∫£n ph·∫©m m·ªõi", correct: false }] },
            { question: "An Nhi√™n ƒë√£ h∆∞·ªõng d·∫´n B√¨nh Minh c√°ch xem t·ªìn kho tr·ª±c ti·∫øp tr√™n m·ªói s·∫£n ph·∫©m. ƒêi·ªÅu n√†y gi√∫p B√¨nh Minh tr√°nh ƒë∆∞·ª£c v·∫•n ƒë·ªÅ g√¨?", answers: [{ text: "Nh·∫≠p sai t√™n s·∫£n ph·∫©m", correct: false }, { text: "B√°n qu√° s·ªë l∆∞·ª£ng t·ªìn kho ho·∫∑c kh√¥ng bi·∫øt s·∫£n ph·∫©m n√†o ƒëang h·∫øt h√†ng", correct: true }, { text: "Kh√¥ng t√¨m th·∫•y v·ªã tr√≠ s·∫£n ph·∫©m", correct: false }, { text: "Kh√≥ khƒÉn khi th√™m s·∫£n ph·∫©m m·ªõi", correct: false }] },
            { question: "T√≠nh nƒÉng g·ª£i √Ω danh s√°ch s·∫£n ph·∫©m ngay l·∫≠p t·ª©c khi g√µ m·ªôt ph·∫ßn t√™n ho·∫∑c t·ª´ kh√≥a mang l·∫°i l·ª£i √≠ch g√¨?", answers: [{ text: "Gi·∫£m thi·ªÉu l·ªói ch√≠nh t·∫£", correct: false }, { text: "Ti·∫øt ki·ªám th·ªùi gian t√¨m ki·∫øm v√† tƒÉng t·ªëc ƒë·ªô b√°n h√†ng", correct: true }, { text: "Cung c·∫•p th√™m th√¥ng tin chi ti·∫øt v·ªÅ s·∫£n ph·∫©m", correct: false }, { text: "T·ª± ƒë·ªông th√™m s·∫£n ph·∫©m v√†o ƒë∆°n h√†ng", correct: false }] },
            { question: "M·ª•c \"Danh m·ª•c H√†ng h√≥a\" trong KiotViet d√πng ƒë·ªÉ l√†m g√¨ khi s·∫£n ph·∫©m kh√¥ng hi·ªÉn th·ªã?", answers: [{ text: "Th√™m s·∫£n ph·∫©m m·ªõi nhanh ch√≥ng", correct: false }, { text: "Ki·ªÉm tra tr·∫°ng th√°i v√† ƒë·∫£m b·∫£o s·∫£n ph·∫©m ƒë√£ ƒë∆∞·ª£c th√™m ƒë√∫ng c√°ch", correct: true }, { text: "Xem b√°o c√°o b√°n h√†ng", correct: false }, { text: "L·ªçc s·∫£n ph·∫©m theo nh√≥m", correct: false }] },
            { question: "Vi·ªác c√≥ th·ªÉ tra c·ª©u chi ti·∫øt s·∫£n ph·∫©m m√† kh√¥ng c·∫ßn th√™m v√†o ƒë∆°n h√†ng th·ªÉ hi·ªán ƒëi·ªÅu g√¨ v·ªÅ t√≠nh linh ho·∫°t c·ªßa KiotViet?", answers: [{ text: "Ch·ªâ cho ph√©p xem th√¥ng tin c∆° b·∫£n", correct: false }, { text: "H·∫°n ch·∫ø c√°c thao t√°c xem tr∆∞·ªõc", correct: false }, { text: "Cho ph√©p ng∆∞·ªùi d√πng ki·ªÉm tra th√¥ng tin k·ªπ l∆∞·ª°ng tr∆∞·ªõc khi quy·∫øt ƒë·ªãnh th√™m v√†o ƒë∆°n h√†ng", correct: true }, { text: "Ph·ª• thu·ªôc v√†o lo·∫°i s·∫£n ph·∫©m", correct: false }] },
            { question: "Gi·∫£ s·ª≠ B√¨nh Minh c·∫ßn t√¨m m·ªôt s·∫£n ph·∫©m nh∆∞ng ch·ªâ nh·ªõ m√£ v·∫°ch c·ªßa nh√† s·∫£n xu·∫•t, c√¥ ·∫•y s·∫Ω l√†m g√¨?", answers: [{ text: "G√µ t√™n s·∫£n ph·∫©m v√†o √¥ t√¨m ki·∫øm", correct: false }, { text: "Nh·∫≠p m√£ v·∫°ch v√†o √¥ t√¨m ki·∫øm", correct: true }, { text: "T√¨m trong danh m·ª•c h√†ng h√≥a", correct: false }, { text: "B·∫≠t t√πy ch·ªçn \"T·ªìn kho\"", correct: false }] },
            { question: "T√≥m l·∫°i, c√°c t√≠nh nƒÉng t√¨m ki·∫øm v√† qu·∫£n l√Ω s·∫£n ph·∫©m c·ªßa KiotViet ƒë∆∞·ª£c thi·∫øt k·∫ø ƒë·ªÉ h·ªó tr·ª£ ch·ªß c·ª≠a h√†ng nh∆∞ B√¨nh Minh gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ g√¨?", answers: [{ text: "Ch·ªâ qu·∫£n l√Ω t√†i ch√≠nh", correct: false }, { text: "Ch·ªâ qu·∫£n l√Ω nh√¢n vi√™n", correct: false }, { text: "Gi√∫p t√¨m ki·∫øm, qu·∫£n l√Ω v√† th√™m s·∫£n ph·∫©m m·ªôt c√°ch nhanh ch√≥ng, ch√≠nh x√°c v√† hi·ªáu qu·∫£", correct:true }, { text: "Ch·ªâ ph·ª•c v·ª• cho vi·ªác in h√≥a ƒë∆°n", correct: false }] }
        ];

        const elements = {
            startScreen: document.getElementById('start-screen'),
            quizContainer: document.getElementById('quiz-container'),
            resultArea: document.getElementById('result-area'),
            certificateScreen: document.getElementById('certificate-screen'),
            nameInput: document.getElementById('name-input'),
            departmentInput: document.getElementById('department-input'),
            errorMessage: document.getElementById('error-message'),
            modeButtons: document.querySelectorAll('.mode-btn'),
            questionText: document.getElementById('question-text'),
            answerOptionsContainer: document.getElementById('answer-options'),
            nextBtn: document.getElementById('next-btn'),
            restartBtn: document.getElementById('restart-btn'),
            restartFromCertBtn: document.getElementById('restart-from-cert-btn'),
            certificateBtn: document.getElementById('certificate-btn'),
            progressText: document.getElementById('progress-text'),
            progressBar: document.getElementById('progress-bar'),
            scoreDisplay: document.getElementById('score-display'),
            scoreText: document.getElementById('score-text'),
            resultTitle: document.getElementById('result-title'),
            failMessage: document.getElementById('fail-message'),
            feedbackArea: document.getElementById('feedback-area'),
            certName: document.getElementById('cert-name'),
            certDepartment: document.getElementById('cert-department'),
            certMode: document.getElementById('cert-mode'),
            certScore: document.getElementById('cert-score'),
            certDate: document.getElementById('cert-date'),
            startGameBtn: document.getElementById('start-game-btn'),
        };

        let currentQuestionIndex = 0;
        let score = 0;
        let questionsForGame = [];
        let playerName = '';
        let playerDepartment = '';
        let selectedGameMode = { mode: null, text: '' };
        
        const shuffleArray = (array) => { for (let i = array.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [array[i], array[j]] = [array[j], array[i]]; } };
        
        function initializeGame(mode, modeText) {
            playerName = elements.nameInput.value.trim();
            playerDepartment = elements.departmentInput.value.trim();
            if (!playerName || !playerDepartment) { elements.errorMessage.innerText = "Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin."; return; }
            
            elements.errorMessage.innerText = "";
            
            const shuffledQuestions = [...quizData];
            shuffleArray(shuffledQuestions);

            if (mode === 'all') {
                questionsForGame = shuffledQuestions;
            } else {
                questionsForGame = shuffledQuestions.slice(0, parseInt(mode));
            }
            
            elements.startScreen.classList.add('hidden');
            elements.quizContainer.classList.remove('hidden');
            elements.quizContainer.classList.add('fade-in');
            startQuiz();
        }

        function startQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            elements.progressBar.style.width = '0%';
            elements.scoreDisplay.innerText = `ƒêi·ªÉm: 0`;
            elements.nextBtn.classList.add('hidden');
            elements.resultArea.classList.add('hidden');
            elements.quizContainer.classList.remove('hidden');
            showQuestion();
        }

        function showQuestion() {
            resetState();
            const currentQuestion = questionsForGame[currentQuestionIndex];
            const questionNo = currentQuestionIndex + 1;
            elements.questionText.innerText = currentQuestion.question;
            elements.progressText.innerText = `C√¢u ${questionNo}/${questionsForGame.length}`;
            elements.progressBar.style.width = `${(questionNo / questionsForGame.length) * 100}%`;
            elements.questionText.parentElement.classList.add('fade-in');
            currentQuestion.answers.forEach(answer => {
                const button = document.createElement('button');
                button.innerText = answer.text;
                button.className = 'option-btn w-full text-left p-4 rounded-lg bg-slate-50/70 border border-slate-200 hover:border-kv-blue hover:bg-blue-50/70 transition-all font-medium';
                if (answer.correct) button.dataset.correct = "true";
                button.addEventListener('click', selectAnswer);
                elements.answerOptionsContainer.appendChild(button);
            });
        }

        function resetState() {
            elements.nextBtn.classList.add('hidden');
            elements.feedbackArea.innerHTML = '';
            elements.questionText.parentElement.classList.remove('fade-in');
            while (elements.answerOptionsContainer.firstChild) {
                elements.answerOptionsContainer.removeChild(elements.answerOptionsContainer.firstChild);
            }
        }

        function selectAnswer(e) {
            const selectedBtn = e.target;
            const isCorrect = selectedBtn.dataset.correct === "true";
            const feedbackMessage = document.createElement('p');
            feedbackMessage.className = 'font-medium';
            if (isCorrect) {
                score++;
                elements.scoreDisplay.innerText = `ƒêi·ªÉm: ${score}`;
                feedbackMessage.innerHTML = 'üéâ Ch√∫c m·ª´ng b·∫°n, ƒë√°p √°n ho√†n to√†n ch√≠nh x√°c!';
                feedbackMessage.className += ' text-green-600';
            } else {
                feedbackMessage.innerHTML = `R·∫•t ti·∫øc, b·∫°n ƒë√£ sai. Tham kh·∫£o th√™m t·∫°i <a href="https://sites.google.com/view/kvretail-faq" target="_blank" class="underline font-bold text-kv-blue hover:text-blue-700">H·ªèi ƒë√°p KiotViet Retail</a> ho·∫∑c <a href="https://notebooklm.google.com/notebook/a4480a38-2d6e-4974-9880-c45e534f5fa5" target="_blank" class="underline font-bold text-kv-blue hover:text-blue-700">Chatbot Riri</a> nh√©!`;
                feedbackMessage.className += ' text-red-500';
            }
            elements.feedbackArea.appendChild(feedbackMessage);
            Array.from(elements.answerOptionsContainer.children).forEach(button => {
                if (button.dataset.correct === "true") button.classList.add('correct');
                else if (button === selectedBtn) button.classList.add('incorrect');
                button.disabled = true;
            });
            elements.nextBtn.classList.remove('hidden');
        }
        
        function triggerConfetti() {
            const duration = 3 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 0 };
            function randomInRange(min, max) { return Math.random() * (max - min) + min; }
            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();
                if (timeLeft <= 0) return clearInterval(interval);
                const particleCount = 50 * (timeLeft / duration);
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 } }));
                confetti(Object.assign({}, defaults, { particleCount, origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 } }));
            }, 250);
        }

        function showScore() {
            elements.quizContainer.classList.add('hidden');
            elements.resultArea.classList.remove('hidden');
            elements.resultArea.classList.add('fade-in');
            const percentage = (score / questionsForGame.length) * 100;
            elements.scoreText.innerText = `${playerName} (${playerDepartment}) ƒë√£ tr·∫£ l·ªùi ƒë√∫ng ${score}/${questionsForGame.length} c√¢u.`;
            
            if (percentage >= 80) {
                elements.resultTitle.innerText = "üéâ CH√öC M·ª™NG CHI·∫æN TH·∫ÆNG! üéâ";
                elements.failMessage.classList.add('hidden');
                elements.certificateBtn.classList.remove('hidden');
                elements.restartBtn.classList.add('hidden');
                triggerConfetti();
            } else {
                elements.resultTitle.innerText = "C·∫ßn c·ªë g·∫Øng h∆°n!";
                elements.failMessage.innerHTML = `ƒê·ªÉ c·∫£i thi·ªán k·∫øt qu·∫£, b·∫°n h√£y √¥n t·∫≠p th√™m t·∫°i <a href="https://sites.google.com/view/kvretail-faq" target="_blank" class="underline font-bold text-kv-blue hover:text-blue-700">H·ªèi ƒë√°p KiotViet Retail</a> ho·∫∑c <a href="https://notebooklm.google.com/notebook/a4480a38-2d6e-4974-9880-c45e534f5fa5" target="_blank" class="underline font-bold text-kv-blue hover:text-blue-700">Chatbot Riri</a> nh√©!`;
                elements.failMessage.classList.remove('hidden');
                elements.certificateBtn.classList.add('hidden');
                elements.restartBtn.classList.remove('hidden');
            }
        }
        
        function showCertificate() {
            elements.resultArea.classList.add('hidden');
            elements.certificateScreen.classList.remove('hidden');
            elements.certName.innerText = playerName;
            elements.certDepartment.innerText = `Ph√≤ng ban: ${playerDepartment}`;
            elements.certMode.innerHTML = `Ch·∫ø ƒë·ªô ch∆°i: <strong>${selectedGameMode.text}</strong>`;
            elements.certScore.innerText = `V·ªõi k·∫øt qu·∫£: ${score}/${questionsForGame.length} (${((score / questionsForGame.length) * 100).toFixed(0)}%)`;
            const today = new Date();
            elements.certDate.innerText = `H√† N·ªôi, ng√†y ${today.getDate()} th√°ng ${today.getMonth() + 1} nƒÉm ${today.getFullYear()}`;
        }
        
        function handleRestart() {
            elements.quizContainer.classList.add('hidden');
            elements.resultArea.classList.add('hidden');
            elements.certificateScreen.classList.add('hidden');
            elements.startScreen.classList.remove('hidden');
            elements.startScreen.classList.add('fade-in');

            // Reset start screen state
            selectedGameMode = { mode: null, text: '' };
            elements.startGameBtn.classList.add('opacity-0', '-translate-y-2', 'pointer-events-none');
            elements.startGameBtn.setAttribute('disabled', '');
            elements.modeButtons.forEach(btn => {
                 btn.classList.remove('bg-kv-blue', 'hover:bg-kv-blue-dark');
                 btn.classList.add('bg-slate-700', 'hover:bg-slate-800');
            });
        }

        function handleNextButton() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questionsForGame.length) showQuestion();
            else showScore();
        }
        
        elements.modeButtons.forEach(button => {
            button.addEventListener('click', (e) => {
                // Remove highlight from all buttons
                elements.modeButtons.forEach(btn => {
                    btn.classList.remove('bg-kv-blue', 'hover:bg-kv-blue-dark');
                    btn.classList.add('bg-slate-700', 'hover:bg-slate-800');
                });
                
                // Add highlight to clicked button
                const selectedButton = e.currentTarget;
                selectedButton.classList.remove('bg-slate-700', 'hover:bg-slate-800');
                selectedButton.classList.add('bg-kv-blue', 'hover:bg-kv-blue-dark');

                // Store selected mode
                selectedGameMode.mode = selectedButton.dataset.mode;
                selectedGameMode.text = selectedButton.innerText;

                // Show and enable start button
                elements.startGameBtn.classList.remove('opacity-0', '-translate-y-2', 'pointer-events-none');
                elements.startGameBtn.removeAttribute('disabled');
            });
        });

        elements.startGameBtn.addEventListener('click', () => {
             if (selectedGameMode.mode) {
                initializeGame(selectedGameMode.mode, selectedGameMode.text);
            }
        });

        elements.nextBtn.addEventListener('click', handleNextButton);
        elements.restartBtn.addEventListener('click', handleRestart);
        elements.restartFromCertBtn.addEventListener('click', handleRestart);
        elements.certificateBtn.addEventListener('click', showCertificate);
    </script>
</body>
</html>

